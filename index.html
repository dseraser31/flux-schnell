<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>مولد الصور - Flux Schnell</title>
  <style>
    body { font-family: Arial, sans-serif; background: #1a1a1a; color: #fff; text-align: center; padding: 30px; }
    input, select, button { padding: 10px; margin: 10px; border-radius: 8px; border: none; }
    input, select { width: 60%; }
    button { background: #ff6600; color: #fff; cursor: pointer; font-weight: bold; }
    button:hover { background: #e65c00; }
    img { max-width: 80%; margin-top: 20px; border: 4px solid #444; border-radius: 12px; }
  </style>
</head>
<body>
  <h1>🎨 مولد الصور (Flux Schnell)</h1>
  <form id="generateForm">
    <input type="text" id="prompt" placeholder="اكتب الوصف هنا..." required><br>
    <label>📐 المقاس:</label>
    <select id="size">
      <option value="512x512">مربع (512x512)</option>
      <option value="768x1024">طويل (768x1024)</option>
      <option value="1024x576">عريض (1024x576)</option>
    </select><br>
    <button type="submit">🚀 توليد الصورة</button>
  </form>
  <div id="result"></div>

  <script>
    document.getElementById("generateForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const prompt = document.getElementById("prompt").value;
      const size = document.getElementById("size").value.split("x");
      const width = size[0];
      const height = size[1];
      document.getElementById("result").innerHTML = "<p>⏳ جاري توليد الصورة...</p>";

      const url = `https://purple-hat-d92c.dseraser31.workers.dev/?prompt=${encodeURIComponent(prompt)}&width=512&height=512`;

      const res = await fetch(url);
      if (res.ok) {
        const blob = await res.blob();
        const imgUrl = URL.createObjectURL(blob);
        document.getElementById("result").innerHTML = `<a href="${imgUrl}" download="image.png"><img src="${imgUrl}" alt="الصورة"></a><p>⬇️ اضغط على الصورة للتحميل</p>`;
      } else {
        document.getElementById("result").innerHTML = "<p>❌ حدث خطأ</p>";
      }
    });
  </script>
</body>
</html>
